---
import { Debug } from 'astro/components'
import Layout from '../../layouts/Layout.astro'
import NoteLink from '../../components/NoteLink.astro'

export async function getStaticPaths() {
    const notes = await Astro.glob("C:\\Users\\brian\\moa-dendron\\notes\\*.md")

    return notes.map(note => {
        const parent = "root"

        return {
            params: { id: note.frontmatter.id },
            props: { note, parent },
        }
    })
}

const { id } = Astro.params
const { note, parent } = Astro.props
---
<Layout title={note.frontmatter.title}>
    <h1>{note.frontmatter.title}</h1>
    <dl>
        <dt>Parent</dt>
        <dd>{parent ? <NoteLink to={parent} /> : "None"}</dd>
        <dt>Created</dt>
        <dd>{note.frontmatter.created}</dd>
        <dt>Updated</dt>
        <dd>{note.frontmatter.updated}</dd>
    </dl>
    <Debug {note.frontmatter} />
    <note.Content />
</Layout>
